# Certificate Authority Configuration for Sigul Infrastructure
# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: 2025 The Linux Foundation

[ req ]
default_bits = 4096
prompt = no
distinguished_name = ca_distinguished_name
x509_extensions = ca_extensions

[ ca_distinguished_name ]
C = US
ST = California
L = San Francisco
O = Linux Foundation
OU = Sigul Infrastructure
CN = Sigul Test CA

[ ca_extensions ]
basicConstraints = critical,CA:true
keyUsage = critical,keyCertSign,cRLSign
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always,issuer:always

# Extensions for component certificates
[ server_extensions ]
basicConstraints = CA:false
keyUsage = critical,digitalSignature,keyEncipherment
extendedKeyUsage = serverAuth
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
subjectAltName = @server_alt_names

[ bridge_extensions ]
basicConstraints = CA:false
keyUsage = critical,digitalSignature,keyEncipherment
extendedKeyUsage = serverAuth,clientAuth
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
subjectAltName = @bridge_alt_names

[ client_extensions ]
basicConstraints = CA:false
keyUsage = critical,digitalSignature,keyEncipherment
extendedKeyUsage = clientAuth
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
subjectAltName = @client_alt_names

# Subject Alternative Names for different components
[ server_alt_names ]
DNS.1 = sigul-server
DNS.2 = localhost
IP.1 = 127.0.0.1

[ bridge_alt_names ]
DNS.1 = sigul-bridge
DNS.2 = localhost
IP.1 = 127.0.0.1

[ client_alt_names ]
DNS.1 = sigul-client
DNS.2 = sigul-client-test
DNS.3 = localhost
IP.1 = 127.0.0.1
